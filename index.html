<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <script>
      (function(){
        var saved = localStorage.getItem('bird-game-theme');
        if (saved === 'light') document.documentElement.setAttribute('data-theme', 'light');
        else if (saved === 'dark') document.documentElement.removeAttribute('data-theme');
        else if (typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches)
          document.documentElement.setAttribute('data-theme', 'light');
      })();
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Bird Game</title>
    <style>
      /* ========== Addicted-style design tokens (responsive-first) ========== */
      :root {
        --bg-deep: #08080a;
        --bg-surface: #0e0e10;
        --bg-card: #12121a;
        --bg-elevated: #18181f;
        --bg-hover: #222228;
        --border: #1e1e24;
        --border-subtle: #1a1a1f;
        --text: #f4f4f5;
        --text-muted: #6b6b75;
        --accent: #10b981;
        --accent-dim: rgba(16, 185, 129, 0.15);
        --radius: 4px;
        --header-h: 56px;
        --tabs-h: 44px;
        --touch-min: 44px;
        --content-pad: 16px;
        --content-max: 960px;
      }
      /* ライトテーマ（data-theme="light" を html に付与で切り替え） */
      [data-theme="light"] {
        --bg-deep: #f4f4f5;
        --bg-surface: #ffffff;
        --bg-card: #ffffff;
        --bg-elevated: #fafafa;
        --bg-hover: #eeeeef;
        --border: #e4e4e7;
        --border-subtle: #eaeaea;
        --text: #18181b;
        --text-muted: #8b7355;
        --accent: #059669;
        --accent-dim: rgba(5, 150, 105, 0.12);
      }

      @media (min-width: 768px) {
        :root {
          --content-pad: 20px;
        }
      }

      * { margin: 0; padding: 0; box-sizing: border-box; }
      html {
        -webkit-tap-highlight-color: transparent;
        /* Prevent global centering shift when page scrollbar toggles (Title ↔ Shell). */
        scrollbar-gutter: stable;
      }
      @supports not (scrollbar-gutter: stable) {
        html { overflow-y: scroll; }
      }
      body {
        width: 100%;
        min-height: 100vh;
        background: var(--bg-deep);
        color: var(--text);
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        font-size: 14px;
        line-height: 1.4;
        overflow-x: hidden;
        display: flex;
        flex-direction: column;
      }

      /* ========== Title (Connect) screen — Addicted tone ========== */
      #title-ui {
        display: none;
        position: fixed;
        inset: 0;
        z-index: 99999;
        background: var(--bg-deep);
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 24px;
        padding: 24px;
      }
      #title-ui.visible { display: flex; }
      #title-ui .title-text {
        font-size: clamp(22px, 5vw, 28px);
        font-weight: 600;
        letter-spacing: 0.03em;
        color: var(--text);
      }
      #title-ui .subtitle {
        font-size: 13px;
        color: var(--text-muted);
        letter-spacing: 0.02em;
      }
      #connect-wallet-btn {
        min-height: var(--touch-min);
        padding: 0 28px;
        font-size: 14px;
        font-weight: 500;
        letter-spacing: 0.02em;
        background: var(--bg-elevated);
        color: var(--text);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        cursor: pointer;
        transition: background 0.15s, border-color 0.15s;
      }
      #connect-wallet-btn:hover {
        background: var(--bg-card);
        border-color: var(--text-muted);
      }
      #connect-wallet-btn:disabled { opacity: 0.5; cursor: not-allowed; }

      /* ========== Game shell ========== */
      #game-shell {
        display: none;
        flex: 1;
        flex-direction: column;
        min-height: 100vh;
        z-index: 0;
      }
      #game-shell.visible { display: flex; }

      /* ----- Header ----- */
      .shell-header {
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 8px;
        padding: 8px var(--content-pad);
        background: var(--bg-surface);
        border-bottom: 1px solid var(--border);
      }
      .shell-header-left {
        display: flex;
        align-items: center;
        gap: 12px;
        min-height: 40px;
      }
      .shell-logo {
        font-size: 16px;
        font-weight: 600;
        letter-spacing: 0.02em;
        color: var(--text);
      }
      .shell-subtitle {
        font-size: 12px;
        color: var(--text-muted);
      }
      .shell-wallet-row {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 8px;
      }
      .shell-wallet {
        display: flex;
        align-items: center;
        height: 40px;
        min-height: 40px;
        padding: 0 14px;
        box-sizing: border-box;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        font-size: 13px;
        font-variant-numeric: tabular-nums;
      }
      .shell-wallet-address { color: var(--text-muted); }
      .shell-disconnect-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        padding: 0;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        color: var(--text-muted);
        cursor: pointer;
        transition: color 0.15s, background 0.15s, border-color 0.15s;
      }
      .shell-disconnect-btn:hover {
        color: var(--text);
        background: var(--bg-elevated);
        border-color: var(--text-muted);
      }
      .shell-disconnect-btn svg { width: 18px; height: 18px; }
      .shell-theme-btn {
        display: flex; align-items: center; justify-content: center;
        width: 40px; height: 40px; padding: 0;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        color: var(--text-muted);
        cursor: pointer;
        transition: color 0.15s, background 0.15s, border-color 0.15s;
      }
      .shell-theme-btn:hover { color: var(--text); background: var(--bg-hover); border-color: var(--text-muted); }
      .shell-theme-btn svg { width: 20px; height: 20px; }
      .shell-theme-btn .theme-icon-light { display: none; }
      [data-theme="light"] .shell-theme-btn .theme-icon-dark { display: none; }
      [data-theme="light"] .shell-theme-btn .theme-icon-light { display: block; }
      [data-theme="light"] .shell-theme-btn,
      [data-theme="light"] .shell-theme-btn svg { color: var(--text-muted); }
      [data-theme="light"] .shell-theme-btn:hover,
      [data-theme="light"] .shell-theme-btn:hover svg { color: var(--text-muted); }

      /* ----- Tabs (sticky + z-index so one tap always switches from Adopt tab) ----- */
      .shell-tabs {
        flex-shrink: 0;
        position: sticky;
        top: 0;
        z-index: 20;
        display: flex;
        gap: 0;
        min-height: var(--tabs-h);
        padding: 0 var(--content-pad);
        background: var(--bg-surface);
        border-bottom: 1px solid var(--border);
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
      .shell-tabs::-webkit-scrollbar { height: 0; }
      .shell-tab {
        flex-shrink: 0;
        min-height: var(--touch-min);
        min-width: 80px;
        padding: 0 16px;
        font-size: 13px;
        font-weight: 500;
        color: var(--text-muted);
        background: none;
        border: none;
        border-bottom: 2px solid transparent;
        cursor: pointer;
        transition: color 0.15s, border-color 0.15s;
        touch-action: manipulation;
      }
      .shell-tab:hover { color: var(--text); }
      .shell-tab.active {
        color: var(--text);
        border-bottom-color: var(--accent);
      }
      .shell-tab.onboarding-tab-locked { opacity: 0.5; pointer-events: none; cursor: not-allowed; }

      /* ----- Status row (status cards + tab intro share same container width) ----- */
      .status-panel {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      /* ----- Content ----- */
      .shell-content {
        flex: 1;
        min-height: 0;
        padding: var(--content-pad);
        display: flex;
        flex-direction: column;
        gap: 20px;
        overflow: hidden;
      }
      /* ライトモード: 左右の余白を薄いグレーにして「フレーム」として見せる（白いだけの余白感を減らす） */
      [data-theme="light"] .shell-content {
        background: #eaeaea;
      }
      .shell-content-inner {
        position: relative;
        flex: 1;
        min-height: 0;
        max-width: var(--content-max);
        margin: 0 auto;
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 20px;
        overflow: auto;
        -webkit-overflow-scrolling: touch;
        touch-action: pan-y;
        scrollbar-gutter: stable;
      }
      @supports not (scrollbar-gutter: stable) {
        .shell-content-inner { overflow-y: scroll; }
      }
      .tab-pane { display: none; flex-direction: column; gap: 20px; }
      .tab-pane.active { display: flex; }
      /* 各タブ上部の帯（Farming風の枠）＋タイトル/説明。縦の区間はすべて 20px で均等に。 */
      .adopt-pane-body {
        padding: 0 16px;
        display: flex;
        flex-direction: column;
        gap: 20px;
        background: linear-gradient(180deg, var(--bg-elevated) 0%, var(--bg-page) 100%);
        border-radius: var(--radius);
        box-sizing: border-box;
      }
      .adopt-tagline {
        margin: 0;
        font-size: 15px;
        font-weight: 500;
        color: var(--text);
        text-align: center;
      }
      .adopt-balance {
        font-size: 14px;
        color: var(--text-muted);
        text-align: center;
      }
      .adopt-balance #adopt-balance-value { font-weight: 600; color: var(--accent); }
      .adopt-description {
        margin: 0;
        font-size: 12px;
        color: var(--text-muted);
        line-height: 1.5;
        text-align: center;
      }
      .adopt-cta-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 16px;
        flex-shrink: 0;
        min-height: fit-content;
      }
      .adopt-cta-title {
        margin: 0 0 12px 0;
        font-size: 12px;
        font-weight: 600;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.06em;
      }
      .gacha-cta-wrap {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .gacha-cta-badge-row {
        min-height: 22px;
        text-align: left;
      }
      .gacha-cta-badge-row:empty,
      .gacha-cta-badge-row.gacha-cta-badge-row--hidden { display: none; min-height: 0; }
      .gacha-cta {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }
      .gacha-option {
        display: flex;
        flex-direction: column;
        gap: 6px;
        min-width: 0;
      }
      .gacha-option .shell-gacha-spin-btn {
        width: 100%;
      }
      .adopt-free-badge {
        display: inline-block;
        font-size: 10px;
        font-weight: 600;
        color: var(--accent);
        background: var(--accent-dim);
        padding: 2px 6px;
        border-radius: 4px;
      }
      .adopt-rarity-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 16px;
      }
      .adopt-rarity-card .adopt-cta-title {
        margin: 0 0 12px 0;
      }
      .adopt-rarity-preview-list {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .adopt-rarity-preview-item {
        display: grid;
        grid-template-columns: 1fr auto;
        align-items: center;
        gap: 8px 12px;
        padding: 10px 12px;
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        font-size: 13px;
      }
      .adopt-rarity-preview-item .adopt-rarity-name {
        font-weight: 500;
        color: var(--text-muted);
      }
      .adopt-rarity-preview-item .adopt-rarity-rate {
        font-weight: 500;
        color: var(--accent);
        font-variant-numeric: tabular-nums;
      }
      .adopt-rarity-preview-item .adopt-rarity-bar-wrap {
        grid-column: 1 / -1;
        height: 4px;
        background: var(--bg-elevated);
        border-radius: 2px;
        overflow: hidden;
      }
      .adopt-rarity-preview-item .adopt-rarity-bar {
        height: 100%;
        background: var(--accent);
        border-radius: 2px;
        transition: width 0.3s ease;
      }
      .adopt-stats {
        font-size: 13px;
        color: var(--text-muted);
      }
      .adopt-stats #adopt-total-count { font-weight: 600; color: var(--text); }
      .adopt-feedback {
        min-height: 0;
        font-size: 14px;
        font-weight: 600;
        color: var(--accent);
        text-align: center;
        opacity: 0;
        transition: opacity 0.25s;
      }
      .adopt-feedback.adopt-feedback--show {
        opacity: 1;
        font-size: 18px;
        animation: adopt-feedback-pop 0.5s ease-out;
      }
      @keyframes adopt-feedback-pop {
        0% { transform: scale(0.9); opacity: 0; }
        50% { transform: scale(1.08); }
        100% { transform: scale(1); opacity: 1; }
      }
      .shell-gacha-spin-btn {
        min-width: 0;
        min-height: 48px;
        padding: 0 12px;
        font-size: 14px;
        font-weight: 600;
        color: #fff !important;
        background-color: var(--accent) !important;
        border: none;
        border-radius: var(--radius);
        cursor: pointer;
        transition: opacity 0.15s, transform 0.15s;
        box-shadow: 0 2px 8px var(--accent-dim);
        -webkit-appearance: none;
        appearance: none;
        overflow: hidden;
      }
      .shell-gacha-spin-btn:hover { opacity: 0.95; transform: scale(1.02); }
      .shell-gacha-spin-btn:active { transform: scale(0.98); }
      .shell-gacha-spin-btn:disabled,
      .shell-gacha-spin-btn.onboarding-locked { opacity: 0.5; cursor: not-allowed; transform: none; pointer-events: none; }
      @media (min-width: 400px) {
        .shell-gacha-spin-btn { min-height: 52px; font-size: 15px; padding: 0 16px; }
      }
      @media (min-width: 480px) {
        .shell-gacha-spin-btn { font-size: 16px; }
      }
      .gacha-cost {
        font-size: 12px;
        color: var(--text-muted);
      }
      .gacha-cost.gacha-cost-insufficient {
        color: #f97373;
      }
      .gacha-insufficient-message {
        font-size: 13px;
        color: #f97373;
        margin: 12px 0 0 0;
        min-height: 0;
      }
      .gacha-insufficient-message:empty {
        display: none;
      }
      .gacha-results-section {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 16px;
        position: relative;
        overflow: hidden;
      }
      .gacha-results-section.gacha-results-section--hidden {
        display: none !important;
      }
      .gacha-opening {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 120px;
        font-size: 18px;
        font-weight: 600;
        color: var(--text-muted);
        animation: gacha-opening-pulse 0.8s ease-in-out infinite;
      }
      @keyframes gacha-opening-pulse {
        0%, 100% { opacity: 0.6; }
        50% { opacity: 1; }
      }
      #pane-adopt.active .shell-gacha-spin-btn:not([disabled]):not(.onboarding-locked) {
        animation: adopt-btn-glow 2.5s ease-in-out infinite;
      }
      @keyframes adopt-btn-glow {
        0%, 100% { box-shadow: 0 2px 8px var(--accent-dim); }
        50% { box-shadow: 0 2px 14px var(--accent-dim); }
      }
      .gacha-results-section .gacha-results-title {
        margin: 0 0 12px 0;
      }
      /* 幅に応じて列数変更。最後の1枚は中央寄せで空白を目立たせない */
      .gacha-results-area {
        min-height: 80px;
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 8px;
        align-items: start;
      }
      .gacha-results-empty {
        font-size: 13px;
        color: var(--text-muted);
        margin: 0;
      }
      .gacha-results-item {
        width: 100%;
        height: auto;
        aspect-ratio: 1;
        object-fit: cover;
        object-position: center;
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        animation: gacha-reveal 0.45s ease-out forwards;
        justify-self: stretch;
      }
      /* 9枚のとき：最後の1枚を中央に（右の空白をなくす） */
      .gacha-results-area .gacha-results-item:nth-child(9):last-child {
        grid-column: 1 / -1;
        justify-self: center;
        max-width: min(96px, 50vw);
      }
      @media (min-width: 560px) {
        .gacha-results-area {
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
        .gacha-results-area .gacha-results-item:nth-child(9):last-child {
          grid-column: unset;
          justify-self: stretch;
          max-width: none;
        }
        .gacha-results-area .gacha-results-item:nth-child(10) {
          grid-column: 2;
          justify-self: center;
        }
      }
      @media (min-width: 768px) {
        .gacha-results-area {
          grid-template-columns: repeat(4, minmax(0, 1fr));
        }
        .gacha-results-area .gacha-results-item:nth-child(9) {
          grid-column: 2;
          justify-self: center;
        }
        .gacha-results-area .gacha-results-item:nth-child(10) {
          grid-column: 3;
          justify-self: center;
        }
      }
      @keyframes gacha-reveal {
        from { transform: scale(0.4); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
      }
      .gacha-results-item--common { box-shadow: 0 0 0 1px var(--border); }
      .gacha-results-item--uncommon { box-shadow: 0 0 12px rgba(34, 197, 94, 0.45); }
      .gacha-results-item--rare { box-shadow: 0 0 14px rgba(59, 130, 246, 0.55); }
      .gacha-results-item--epic { box-shadow: 0 0 18px rgba(168, 85, 247, 0.6); }
      .gacha-results-item--legendary { box-shadow: 0 0 22px rgba(234, 179, 8, 0.75); }
      /* レア以上：中央拡大のあと、それぞれの色で光る（reveal を上書きしないよう両方指定） */
      .gacha-results-item--glow.gacha-results-item--rare {
        animation: gacha-reveal 0.45s ease-out forwards, gacha-card-glow-rare 1.4s ease-in-out 0.45s infinite;
        border-radius: var(--radius);
      }
      .gacha-results-item--glow.gacha-results-item--epic {
        animation: gacha-reveal 0.45s ease-out forwards, gacha-card-glow-epic 1.2s ease-in-out 0.45s infinite;
        border-radius: var(--radius);
      }
      .gacha-results-item--glow.gacha-results-item--legendary {
        animation: gacha-reveal 0.45s ease-out forwards, gacha-card-glow-legendary 1s ease-in-out 0.45s infinite;
        border-radius: var(--radius);
      }
      @keyframes gacha-card-glow-rare {
        0%, 100% { box-shadow: 0 0 12px rgba(59, 130, 246, 0.5), 0 0 28px rgba(59, 130, 246, 0.3); }
        50% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.7), 0 0 44px rgba(59, 130, 246, 0.45); }
      }
      @keyframes gacha-card-glow-epic {
        0%, 100% { box-shadow: 0 0 16px rgba(168, 85, 247, 0.5), 0 0 36px rgba(168, 85, 247, 0.35); }
        50% { box-shadow: 0 0 26px rgba(168, 85, 247, 0.75), 0 0 56px rgba(168, 85, 247, 0.5); }
      }
      @keyframes gacha-card-glow-legendary {
        0%, 100% { box-shadow: 0 0 20px rgba(234, 179, 8, 0.6), 0 0 44px rgba(234, 179, 8, 0.4); }
        50% { box-shadow: 0 0 32px rgba(234, 179, 8, 0.9), 0 0 64px rgba(234, 179, 8, 0.55); }
      }
      .gacha-confetti-wrap {
        position: absolute;
        inset: 0;
        pointer-events: none;
        overflow: hidden;
      }
      .gacha-confetti {
        position: absolute;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        pointer-events: none;
        animation: gacha-confetti-fall 1.4s ease-in forwards;
      }
      .gacha-confetti-wrap--uncommon .gacha-confetti { animation-duration: 1.3s; }
      .gacha-confetti-wrap--rare .gacha-confetti { width: 9px; height: 9px; animation-duration: 1.5s; }
      .gacha-confetti-wrap--epic .gacha-confetti {
        width: 10px;
        height: 10px;
        animation: gacha-confetti-fall 1.8s ease-in forwards;
        box-shadow: 0 0 6px currentColor;
      }
      .gacha-confetti-wrap--legendary .gacha-confetti {
        width: 12px;
        height: 12px;
        animation: gacha-confetti-fall 2.2s ease-in forwards;
        box-shadow: 0 0 10px currentColor;
      }
      @keyframes gacha-confetti-fall {
        to { opacity: 0; transform: translateY(120px) rotate(180deg); }
      }

      /* ----- Farming pane (HTML+CSS) ----- */
      .farming-pane-body { padding: 0; display: flex; flex-direction: column; gap: 16px; }
      .loft-section {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 20px;
      }
      /* 常に4列。幅を狭めても列は崩さずアイコンだけ縮小（行数はスロット数に応じて） */
      .loft-grid {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 12px;
        width: 100%;
        max-width: 100%;
        margin: 0 auto 20px;
      }
      @media (min-width: 768px) {
        .loft-grid { gap: 16px; }
      }
      .loft-cell {
        position: relative;
        aspect-ratio: 1;
        min-height: 0;
        width: 100%;
        max-width: 100%;
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }
      .loft-cell.locked { opacity: 0.5; pointer-events: none; }
      .loft-cell img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
      }
      .farming-accrual-hint {
        min-height: 24px;
        font-size: 14px;
        font-weight: 500;
        color: var(--accent);
        text-align: center;
        caret-color: transparent;
        user-select: none;
      }
      .loft-section, .loft-grid, .loft-cell {
        caret-color: transparent;
        user-select: none;
      }
      .loft-cell:focus, .farming-accrual-hint:focus {
        outline: none;
      }
      .loft-save-wrap {
        margin-top: 16px;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 12px;
      }
      .loft-save-power-hint {
        font-size: 0.9rem;
        color: var(--text-muted);
        width: 100%;
        text-align: center;
      }
      .loft-save-btn {
        padding: 12px 32px;
        font-size: 16px;
        font-weight: 500;
        color: #fff;
        background: var(--accent);
        border: 1px solid transparent;
        border-radius: var(--radius);
        cursor: pointer;
        transition: opacity 0.15s, transform 0.15s;
        user-select: none;
        -webkit-user-select: none;
        caret-color: transparent;
      }
      .loft-save-btn:hover:not(:disabled) {
        opacity: 0.95;
        transform: scale(1.02);
      }
      .loft-save-btn:disabled { opacity: 0.5; cursor: not-allowed; }
      .loft-save-btn:focus { outline: none; }

      /* ----- Deck pane (HTML+CSS) ----- */
      /* 常に上下配置：デッキを上・インベントリを下。デッキの鳥を大きくして主役に。 */
      .deck-pane-body {
        padding: 0;
        display: flex;
        flex-direction: column;
        gap: 16px;
        overflow: visible;
        touch-action: pan-y;
      }
      .deck-empty-hint {
        font-size: 14px;
        color: var(--text-muted);
        text-align: center;
        padding: 24px 16px;
        margin: 0;
      }
      .deck-empty-hint.deck-empty-hint--hidden { display: none !important; }
      .deck-content-with-birds {
        display: flex;
        flex-direction: column;
        gap: 16px;
        overflow: visible;
        touch-action: pan-y;
      }
      .deck-content-with-birds.deck-content-with-birds--hidden { display: none !important; }
      .deck-onboarding-cta {
        padding: 16px;
        margin-bottom: 16px;
        background: var(--accent-dim);
        border: 1px solid var(--accent);
        border-radius: var(--radius);
        text-align: center;
      }
      .deck-onboarding-cta-text { margin: 0 0 12px 0; font-size: 14px; color: var(--text); }
      .deck-pane-body { position: relative; min-height: 200px; }
      /* オンボーディング暗転: Claim確認モーダルと同じ色・同じ範囲（viewport全体） */
      .deck-onboarding-place-overlay {
        display: none;
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 150;
      }
      .deck-onboarding-place-overlay.visible { display: block; }
      .deck-onboarding-place-overlay-dim-wrap {
        position: absolute;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
      }
      .deck-onboarding-place-overlay-dim {
        position: absolute;
        background: transparent;
        box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.6);
        pointer-events: none;
      }
      .deck-onboarding-place-message-wrap {
        position: absolute;
        left: 0;
        top: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        pointer-events: none;
        min-width: 260px;
        max-width: calc(100% - 32px);
        box-sizing: border-box;
      }
      .deck-onboarding-place-message-inner {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        animation: deck-onboarding-float 2.5s ease-in-out infinite;
      }
      @keyframes deck-onboarding-float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-6px); }
      }
      .deck-onboarding-place-message-inner.deck-onboarding-message-wobble {
        animation: deck-onboarding-wobble 1.2s ease-in-out infinite;
      }
      @keyframes deck-onboarding-wobble {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-6px); }
        75% { transform: translateX(6px); }
      }
      .deck-onboarding-place-message {
        margin: 0 0 8px 0;
        font-size: 16px;
        font-weight: 600;
        color: #fff !important;
        -webkit-text-fill-color: #fff;
        text-shadow: 0 1px 2px rgba(0,0,0,0.25);
        text-align: center;
        max-width: 100%;
        padding: 0 4px;
      }
      .deck-onboarding-place-pointer {
        margin: 0;
        font-size: 32px;
        line-height: 1;
        color: #fff !important;
        -webkit-text-fill-color: #fff;
      }
      [data-theme="light"] .deck-onboarding-place-message,
      [data-theme="light"] .deck-onboarding-place-pointer {
        color: #fff !important;
        -webkit-text-fill-color: #fff;
      }
      /* オンボーディング暗転: Claim確認モーダルと同じ色・同じ範囲（viewport全体） */
      .adopt-onboarding-overlay {
        display: none;
        position: fixed;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 150;
      }
      .adopt-onboarding-overlay.visible { display: block; }
      .adopt-onboarding-spotlight {
        position: absolute;
        background: transparent;
        box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.6);
        pointer-events: none;
      }
      .adopt-onboarding-message-wrap {
        position: absolute;
        left: 0;
        top: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        pointer-events: none;
        max-width: calc(100% - 32px);
        box-sizing: border-box;
      }
      .adopt-onboarding-message-inner {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        animation: adopt-onboarding-float 2.5s ease-in-out infinite;
      }
      @keyframes adopt-onboarding-float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-6px); }
      }
      .adopt-onboarding-message {
        margin: 0 0 8px 0;
        font-size: 16px;
        font-weight: 600;
        color: #fff;
        text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        text-align: center;
        max-width: 100%;
        padding: 0 4px;
      }
      .adopt-onboarding-br-narrow { display: none; }
      @media (max-width: 570px) {
        .adopt-onboarding-br-narrow { display: block; }
      }
      .adopt-onboarding-pointer {
        margin: 0;
        font-size: 32px;
        line-height: 1;
        color: #fff !important;
        -webkit-text-fill-color: #fff;
      }
      [data-theme="light"] .adopt-onboarding-pointer {
        color: #fff !important;
        -webkit-text-fill-color: #fff;
      }
      /* body 直下のモーダル用: viewport 全体を確実に覆う（右端・スクロールバーまで） */
      .modal-viewport-cover {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        width: 100%;
        height: 100%;
      }
      /* ----- Processing modal: gacha-modal-backdrop と同じ書き方（Gacha / Loft / Claim の待機中） ----- */
      .processing-modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.6);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 200;
      }
      .processing-modal-backdrop.visible { display: flex; }
      .processing-modal {
        max-width: 320px;
        width: calc(100% - 40px);
        background: var(--bg-card);
        border-radius: var(--radius);
        border: 1px solid var(--border);
        padding: 20px 20px 18px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        text-align: center;
      }
      .processing-modal-title {
        margin: 0 0 8px 0;
        font-size: 15px;
        font-weight: 600;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }
      .processing-modal-text {
        margin: 0 0 14px 0;
        font-size: 14px;
        color: var(--text-muted);
      }
      .processing-modal-spinner {
        display: inline-flex;
        gap: 4px;
        align-items: center;
        justify-content: center;
        margin-top: 4px;
      }
      .processing-modal-dot {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        background: var(--accent);
        opacity: 0.4;
        animation: processing-dot 1.1s ease-in-out infinite;
      }
      .processing-modal-dot:nth-child(2) { animation-delay: 0.15s; }
      .processing-modal-dot:nth-child(3) { animation-delay: 0.3s; }
      @keyframes processing-dot {
        0%, 80%, 100% { transform: translateY(0); opacity: 0.35; }
        40% { transform: translateY(-3px); opacity: 1; }
      }
      .deck-section, .inventory-section {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 20px;
        min-width: 0;
        overflow: visible;
        touch-action: pan-y;
      }
      .deck-section-title, .inventory-section-title {
        font-size: 12px;
        font-weight: 600;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.06em;
        margin: 0 0 12px 0;
      }
      .deck-slots-caption {
        font-size: 11px;
        font-weight: 500;
        text-transform: none;
        letter-spacing: 0;
        color: var(--text-muted);
      }
      /* Loftタブのデッキ：Adopt と同じアイコンサイズ。常に4列、狭い幅ではアイコンだけ縮小 */
      .deck-grid {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 12px;
        width: 100%;
        max-width: 100%;
        margin: 0 auto;
      }
      @media (min-width: 768px) {
        .deck-grid { gap: 16px; }
      }
      .deck-slot {
        aspect-ratio: 1;
        min-height: 0;
        width: 100%;
        max-width: 100%;
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background 0.15s, border-color 0.15s;
        position: relative;
        overflow: hidden;
      }
      .deck-slot:hover:not(.locked) { background: var(--bg-card); border-color: var(--text-muted); }
      .deck-slot.locked { opacity: 0.5; cursor: not-allowed; }
      .deck-slot.selected { border-color: var(--accent); box-shadow: 0 0 0 2px var(--accent-dim); }
      .deck-slot { touch-action: pan-y; }
      .deck-slot .deck-slot-id { font-size: 11px; color: var(--text-muted); position: absolute; top: 4px; left: 6px; z-index: 1; }
      .deck-slot .deck-slot-bird {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
      }
      .inventory-hint {
        font-size: 12px;
        color: var(--text-muted);
        margin: 0 0 12px 0;
      }
      .inventory-hint.deck-section-hint {
        margin-top: 12px;
        margin-bottom: 0;
      }
      .inventory-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: repeat(8, 1fr);
        aspect-ratio: 5/8;
        width: 100%;
        gap: 8px;
        overflow: visible;
        touch-action: pan-y;
      }
      .inventory-cell {
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 4px;
        cursor: pointer;
        transition: background 0.15s, border-color 0.15s;
        min-width: 0;
        min-height: 0;
      }
      .inventory-cell:hover { background: var(--bg-card); border-color: var(--text-muted); }
      .inventory-cell.selected { border-color: var(--accent); box-shadow: 0 0 0 2px var(--accent-dim); }
      .inventory-cell:disabled { opacity: 0.5; cursor: not-allowed; }
      .inventory-cell { touch-action: pan-y; }
      .inventory-cell img {
        flex: 1;
        min-width: 0;
        min-height: 0;
        width: 100%;
        max-width: none;
        object-fit: contain;
        aspect-ratio: 1;
      }
      .inventory-cell .inventory-count { font-size: 12px; font-variant-numeric: tabular-nums; color: var(--accent); }
      .inventory-cell.unowned .inventory-unowned {
        font-size: clamp(20px, 8vw, 36px);
        font-weight: 600;
        color: var(--text-muted);
        line-height: 1;
      }

      /* ----- Loft upgrade modal ----- */
      .loft-modal-backdrop {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.6);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }
      .loft-modal-backdrop.visible { display: flex; }
      .loft-modal {
        max-width: 360px;
        width: calc(100% - 40px);
        background: var(--bg-card);
        border-radius: var(--radius);
        border: 1px solid var(--border);
        padding: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      }
      .loft-modal-title {
        margin: 0 0 12px 0;
        font-size: 18px;
        font-weight: 600;
        color: var(--text);
      }
      .loft-modal-title.loft-modal-message--success { color: #22c55e; }
      .loft-modal-cost {
        margin: 0 0 16px 0;
        font-size: 14px;
        color: var(--text-muted);
      }
      .loft-modal-error { font-size: 13px; color: #f87171; margin: 0 0 16px 0; min-height: 1.2em; }
      .loft-modal-error.loft-modal-message--success { color: #22c55e; }
      .loft-modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 8px;
      }
      .loft-modal-cancel, .loft-modal-confirm {
        min-height: 40px;
        padding: 0 16px;
        font-size: 14px;
        font-weight: 500;
        border-radius: var(--radius);
        border: 1px solid var(--border);
        cursor: pointer;
      }
      .loft-modal-cancel {
        background: transparent;
        color: var(--text-muted);
      }
      .loft-modal-cancel:hover { background: var(--bg-hover); }
      .loft-modal-confirm {
        background: var(--accent);
        color: #fff;
        border-color: transparent;
      }
      .loft-modal-confirm:hover:not(:disabled) { opacity: 0.95; }
      .loft-modal-confirm:disabled { opacity: 0.6; cursor: not-allowed; }


      .debug-pane-body { padding: 0; display: flex; flex-direction: column; gap: 16px; }
      .debug-section {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 16px 20px;
      }
      .debug-row {
        display: flex;
        align-items: center;
        gap: 12px;
        min-height: 40px;
        flex-wrap: wrap;
      }
      .debug-row + .debug-row { margin-top: 12px; }
      .debug-row-readonly { margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--border); }
      .debug-label {
        font-size: 12px;
        font-weight: 500;
        color: var(--text-muted);
        min-width: 72px;
      }
      .debug-value {
        font-size: 16px;
        font-variant-numeric: tabular-nums;
        color: var(--accent);
        min-width: 60px;
      }
      .debug-set-btn {
        padding: 6px 14px;
        font-size: 12px;
        font-weight: 500;
        color: var(--text);
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        cursor: pointer;
      }
      .debug-set-btn:hover { background: var(--bg-hover); border-color: var(--text-muted); }
      .debug-loft-btns { display: flex; gap: 8px; }
      .debug-loft-btn {
        width: 32px;
        height: 28px;
        padding: 0;
        font-size: 12px;
        font-weight: 500;
        color: var(--text);
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        cursor: pointer;
      }
      .debug-loft-btn:hover { background: var(--bg-hover); }
      .debug-subtitle { margin: 0 0 8px; font-size: 1rem; }
      .debug-note { margin: 0 0 12px; font-size: 0.85rem; color: var(--text-muted); max-width: 52ch; }
      .debug-section-reset { margin-top: 0; padding-top: 16px; border-top: 1px solid var(--border); }
      .debug-reset-btn {
        width: 100%;
        min-height: 44px;
        font-size: 14px;
        font-weight: 500;
        color: var(--text);
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        cursor: pointer;
        transition: background 0.15s, border-color 0.15s;
      }
      .debug-reset-btn:hover { background: var(--bg-hover); border-color: var(--text-muted); }

      /* ----- Network (flock stats) ----- */
      .network-pane-body { padding: 0; display: flex; flex-direction: column; gap: 24px; }
      .network-intro {
        font-size: 14px;
        color: var(--text-muted);
        margin: 0;
        line-height: 1.5;
      }
      .network-section {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 18px 20px;
      }
      .network-section-title {
        margin: 0 0 14px 0;
        font-size: 15px;
        font-weight: 600;
        color: var(--text);
      }
      .network-stat-list { display: flex; flex-direction: column; gap: 12px; }
      .network-stat-row {
        display: grid;
        grid-template-columns: 1fr auto;
        align-items: center;
        gap: 10px 16px;
      }
      .network-stat-label { font-size: 14px; font-weight: 500; color: var(--text); }
      .network-stat-count { font-size: 14px; font-weight: 600; color: var(--accent); font-variant-numeric: tabular-nums; }
      .network-stat-bar-wrap {
        grid-column: 1 / -1;
        height: 6px;
        background: var(--bg-elevated);
        border-radius: 3px;
        overflow: hidden;
      }
      .network-stat-bar {
        height: 100%;
        background: linear-gradient(90deg, var(--accent-dim), var(--accent));
        border-radius: 3px;
        transition: width 0.35s ease;
      }
      .network-total {
        margin-top: 14px;
        padding-top: 12px;
        border-top: 1px solid var(--border);
        font-size: 13px;
        color: var(--text-muted);
      }
      .network-total strong { color: var(--text); font-variant-numeric: tabular-nums; }
      .network-demo-note {
        margin-top: 16px;
        font-size: 11px;
        color: var(--text-muted);
        opacity: 0.85;
      }
      .network-demo-note--error {
        color: #f87171;
      }

      /* ----- Gacha confirm modal ----- */
      .gacha-modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.6);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 200;
      }
      .gacha-modal-backdrop.visible { display: flex; }
      .gacha-modal {
        max-width: 360px;
        width: calc(100% - 40px);
        background: var(--bg-card);
        border-radius: var(--radius);
        border: 1px solid var(--border);
        padding: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      }
      .gacha-modal-title {
        margin: 0 0 12px 0;
        font-size: 18px;
        font-weight: 600;
        color: var(--text);
      }
      .gacha-modal-text {
        margin: 0 0 16px 0;
        font-size: 14px;
        color: var(--text-muted);
      }
      .gacha-modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 8px;
      }
      .gacha-modal-cancel,
      .gacha-modal-confirm {
        min-height: 40px;
        padding: 0 16px;
        font-size: 14px;
        font-weight: 500;
        border-radius: var(--radius);
        border: 1px solid var(--border);
        cursor: pointer;
      }
      .gacha-modal-cancel {
        background: transparent;
        color: var(--text-muted);
      }
      .gacha-modal-cancel:hover { background: var(--bg-hover); }
      .gacha-modal-confirm {
        background: var(--accent);
        color: #fff;
        border-color: transparent;
      }
      .gacha-modal-confirm[disabled] {
        opacity: 0.5;
        cursor: not-allowed;
      }
      /* Message modal (Claim success, Loft result) reuses gacha-modal look */
      #message-modal-title:empty { display: none; }
      .message-modal-text--success { color: #22c55e; font-weight: 600; }
      .message-modal-text--error { color: #f87171; }

      /* ----- Gacha result modal (fullscreen on mobile, centered on desktop) ----- */
      .gacha-result-modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.75);
        display: none;
        flex-direction: column;
        align-items: stretch;
        justify-content: flex-start;
        overflow-y: auto;
        z-index: 99999;
        padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
      }
      .gacha-result-modal-backdrop.visible { display: flex; }
      .place-success-modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.75);
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 99999;
        padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
      }
      .place-success-modal-backdrop.visible { display: flex; }
      .place-success-modal {
        position: relative;
        width: 100%;
        max-width: 360px;
        margin: 20px;
        padding: 24px 20px;
        background: var(--bg-card);
        border-radius: var(--radius);
        border: 1px solid var(--border);
        box-shadow: 0 24px 48px rgba(0, 0, 0, 0.5);
        overflow: hidden;
      }
      .place-success-modal .gacha-confetti-wrap {
        position: absolute;
        inset: 0;
      }
      .place-success-modal-title {
        margin: 0 0 12px 0;
        font-size: 20px;
        font-weight: 600;
        color: var(--text);
        text-align: center;
        position: relative;
        z-index: 1;
      }
      .place-success-modal-message {
        margin: 0 0 20px 0;
        font-size: 14px;
        color: var(--text-muted);
        text-align: center;
        position: relative;
        z-index: 1;
      }
      .place-success-modal-btn {
        display: block;
        width: 100%;
        padding: 14px 20px;
        font-size: 16px;
        font-weight: 600;
        color: #fff;
        background: var(--accent);
        border: none;
        border-radius: var(--radius);
        cursor: pointer;
        position: relative;
        z-index: 1;
      }
      .place-success-modal-btn:hover {
        filter: brightness(1.08);
      }
      .gacha-result-modal {
        display: flex;
        flex-direction: column;
        width: 100%;
        max-width: 560px;
        margin: 20px auto;
        flex-shrink: 0;
        background: var(--bg-card);
        border-radius: var(--radius);
        border: 1px solid var(--border);
        box-shadow: 0 24px 48px rgba(0, 0, 0, 0.5);
        overflow: hidden;
      }
      /* 10連時：他ボックスと同じ幅までモーダルを拡張 */
      .gacha-result-modal.gacha-result-modal--ten {
        max-width: var(--content-max);
      }
      .gacha-result-modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 20px;
        border-bottom: 1px solid var(--border);
        flex-shrink: 0;
      }
      .gacha-result-modal-title {
        margin: 0;
        font-size: 18px;
        font-weight: 600;
        color: var(--text);
      }
      .gacha-result-modal-close {
        width: 40px;
        height: 40px;
        padding: 0;
        border: none;
        border-radius: var(--radius);
        background: var(--bg-elevated);
        color: var(--text-muted);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        line-height: 1;
      }
      .gacha-result-modal-close:hover {
        background: var(--bg-hover);
        color: var(--text);
      }
      .gacha-result-modal-body {
        flex: 0 0 auto;
        padding: 20px;
        position: relative;
      }
      .gacha-result-modal-feedback {
        text-align: center;
        font-size: 18px;
        font-weight: 600;
        color: var(--accent);
        margin-bottom: 16px;
        min-height: 28px;
      }
      .gacha-result-modal-body .gacha-opening {
        min-height: 140px;
      }
      /* モーダルも Adopted birds と同一：列数・カードサイズ・cover を揃える */
      .gacha-result-modal-body .gacha-results-area {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 8px;
        width: 100%;
        max-width: 100%;
        min-height: 100px;
      }
      /* 10連時：セルを先に配置してから img を入れるため、9・10枚目の位置が最初から正しい */
      .gacha-result-modal-body .gacha-results-cell {
        aspect-ratio: 1;
        min-height: 0;
        display: flex;
        align-items: stretch;
        justify-content: stretch;
      }
      .gacha-result-modal-body .gacha-results-cell .gacha-results-item {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
        justify-self: unset;
      }
      .gacha-result-modal-body .gacha-results-area .gacha-results-item:nth-child(9):last-child {
        grid-column: 1 / -1;
        justify-self: center;
        max-width: min(96px, 50vw);
      }
      /* 1枚だけのときは中央寄せ（flex で中央に1枚） */
      .gacha-result-modal-body .gacha-results-area.gacha-results-area--single {
        display: flex;
        justify-content: center;
        grid-template-columns: unset;
      }
      .gacha-result-modal-body .gacha-results-area.gacha-results-area--single .gacha-results-item:nth-child(9),
      .gacha-result-modal-body .gacha-results-area.gacha-results-area--single .gacha-results-item:nth-child(10) {
        grid-column: unset;
        max-width: none;
      }
      .gacha-result-modal-body .gacha-results-area > .gacha-results-item {
        width: 100%;
        height: auto;
        aspect-ratio: 1;
        object-fit: cover;
        object-position: center;
        justify-self: stretch;
      }
      @media (min-width: 560px) {
        .gacha-result-modal-body .gacha-results-area {
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
        .gacha-result-modal-body .gacha-results-area .gacha-results-item:nth-child(9):last-child {
          grid-column: unset;
          justify-self: stretch;
          max-width: none;
        }
        .gacha-result-modal-body .gacha-results-area .gacha-results-cell:nth-child(10),
        .gacha-result-modal-body .gacha-results-area .gacha-results-item:nth-child(10) {
          grid-column: 2;
          justify-self: center;
        }
      }
      @media (min-width: 768px) {
        .gacha-result-modal-body .gacha-results-area {
          grid-template-columns: repeat(4, minmax(0, 1fr));
        }
        .gacha-result-modal-body .gacha-results-area .gacha-results-cell:nth-child(9) {
          grid-column: 2;
          justify-self: center;
        }
        .gacha-result-modal-body .gacha-results-area .gacha-results-cell:nth-child(10) {
          grid-column: 3;
          justify-self: center;
        }
      }

      /* ----- Status cards: fixed on all tabs (sticky in scroll area) ----- */
      .status-cards {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        width: 100%;
      }
      /* 幅が十分あるときだけ4列。狭いときは2x2で見やすく */
      @media (min-width: 640px) {
        .status-cards { grid-template-columns: repeat(4, 1fr); }
      }
      .status-cards-global {
        /* No sticky: status bar is outside scroll area, so position is always the same */
      }
      .network-state-error {
        font-size: 11px;
        color: var(--text-muted);
        margin: 8px 0 0 0;
        padding: 0;
      }
      .network-state-error:not([style*="display: none"]) {
        color: #f87171;
      }
      .status-card {
        display: flex;
        flex-direction: column;
        min-width: 0;
        min-height: 72px;
        padding: 10px 12px;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
      }
      .status-card-label {
        font-size: 12px;
        font-weight: 600;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.06em;
        line-height: 1.2;
        flex-shrink: 0;
        margin-bottom: 4px;
      }
      .status-card-value {
        font-size: 18px;
        font-weight: 600;
        font-variant-numeric: tabular-nums;
        color: var(--accent);
        margin-top: auto;
      }
      @media (min-width: 768px) {
        .status-card-value { font-size: 20px; }
      }
      .status-card-seed-row {
        display: flex;
        align-items: baseline;
        gap: 6px;
        margin-top: auto;
        flex-wrap: wrap;
        min-width: 0;
      }
      .status-card-seed-row .status-card-value { margin-top: 0; min-width: 0; }
      .status-card-seed-delta {
        font-size: 11px;
        font-weight: 500;
        color: var(--accent);
        user-select: none;
        -webkit-user-select: none;
        caret-color: transparent;
      }
      .status-card-loft .status-card-value-row {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: auto;
        flex-wrap: wrap;
        min-width: 0;
      }
      .status-card-loft .status-card-value-row .status-card-value { margin-top: 0; min-width: 0; }
      .status-loft-upgrade-btn {
        flex-shrink: 0;
        padding: 4px 10px;
        font-size: 11px;
        font-weight: 500;
        color: var(--text);
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        cursor: pointer;
        transition: background 0.15s, border-color 0.15s;
        user-select: none;
        -webkit-user-select: none;
        caret-color: transparent;
      }
      .status-loft-upgrade-btn:hover:not(:disabled) {
        background: var(--bg-card);
        border-color: var(--text-muted);
      }
      .status-loft-upgrade-btn:disabled { opacity: 0.5; cursor: not-allowed; }
      .status-loft-upgrade-btn:focus { outline: none; }
      .status-card-seed .status-card-value-row {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: auto;
        flex-wrap: wrap;
        min-width: 0;
      }
      .status-card-seed .status-card-value-row .status-card-seed-row { margin-top: 0; min-width: 0; }
      .status-claim-btn {
        flex-shrink: 0;
        padding: 4px 10px;
        font-size: 11px;
        font-weight: 500;
        color: var(--text);
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        cursor: pointer;
        transition: background 0.15s, border-color 0.15s;
        user-select: none;
        -webkit-user-select: none;
        caret-color: transparent;
      }
      .status-claim-btn:hover:not(:disabled) {
        background: var(--bg-card);
        border-color: var(--text-muted);
      }
      .status-claim-btn:disabled { opacity: 0.5; cursor: not-allowed; }
      .status-claim-btn:focus { outline: none; }

      /* ----- Canvas card (Adopt 時は画面外に移すだけ。display:none にすると親が 0x0 になり Phaser の scale が壊れる) ----- */
      .canvas-card-hidden {
        position: absolute !important;
        left: -9999px !important;
        top: 0 !important;
        visibility: hidden !important;
        pointer-events: none !important;
      }
      .canvas-card {
        flex: 1;
        min-width: 0; /* flex で幅が子(canvas)に引きずられないようにする。これがないと狭い幅で横スクロールのままになる */
        min-height: 320px;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        overflow: hidden;
        display: flex;
        align-items: stretch;
        justify-content: stretch;
      }
      @media (min-width: 768px) {
        .canvas-card { min-height: 560px; }
      }
      .canvas-card #app {
        flex: 1;
        min-width: 0; /* 同上。Phaser の getParentBounds() が #app の幅を読むため、ここが縮まらないと狭い幅でレイアウトが切り替わらない */
        min-height: 280px;
        position: relative;
        display: flex;
        align-items: flex-start;
        justify-content: center;
      }
      @media (min-width: 768px) {
        .canvas-card #app { min-height: 360px; }
      }
      /* Canvas: let Phaser control size (FIT = fixed aspect). Align to top so deck content starts under tabs. */
      .canvas-card #app canvas { display: block; margin-top: 0 !important; }
      .canvas-card.canvas-card-deck-view {
        min-height: 1100px;
        /* ゲーム背景(BG_CARD)と揃え、下部の色の違和感を防ぐ */
        background: #12121a;
      }

      /* ----- Placeholder / tip ----- */
      .placeholder-pane {
        padding: 16px 20px;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        font-size: 13px;
        color: var(--text-muted);
        line-height: 1.5;
      }
      @media (min-width: 768px) {
        .placeholder-pane { padding: 20px 24px; }
      }

      /* ----- Safe area (notch / home indicator) ----- */
      @supports (padding-bottom: env(safe-area-inset-bottom)) {
        .shell-content { padding-bottom: calc(var(--content-pad) + env(safe-area-inset-bottom)); }
        .shell-tabs { padding-left: calc(var(--content-pad) + env(safe-area-inset-left)); padding-right: calc(var(--content-pad) + env(safe-area-inset-right)); }
        .shell-header { padding-left: calc(var(--content-pad) + env(safe-area-inset-left)); padding-right: calc(var(--content-pad) + env(safe-area-inset-right)); }
      }
    </style>
  </head>
  <body>
    <div id="title-ui" aria-hidden="true">
      <span class="title-text">Bird Game</span>
      <span class="subtitle">Connect your wallet to play</span>
      <button type="button" id="connect-wallet-btn">Connect Wallet</button>
    </div>

    <div id="game-shell" aria-hidden="true">
      <header class="shell-header">
        <div class="shell-header-left">
          <span class="shell-logo">Bird Game</span>
          <span class="shell-subtitle">Play-to-Earn Bird Game</span>
        </div>
        <div class="shell-wallet-row">
          <div class="shell-wallet">
            <span class="shell-wallet-address" id="shell-wallet-address">0x1234…abcd</span>
          </div>
          <button type="button" class="shell-theme-btn" id="shell-theme-btn" title="Toggle light/dark theme" aria-label="Toggle theme">
            <svg class="theme-icon-dark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
            <svg class="theme-icon-light" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
          </button>
          <button type="button" class="shell-disconnect-btn" id="shell-disconnect-btn" title="Disconnect wallet" aria-label="Disconnect wallet">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
          </button>
        </div>
      </header>
      <nav class="shell-tabs">
        <button type="button" class="shell-tab active" data-tab="farming">FARMING</button>
        <button type="button" class="shell-tab" data-tab="adopt">ADOPT</button>
        <button type="button" class="shell-tab" data-tab="deck">LOFT</button>
        <button type="button" class="shell-tab" data-tab="network">NETWORK</button>
        <button type="button" class="shell-tab" data-tab="debug">DEBUG</button>
      </nav>
      <main class="shell-content">
        <div class="shell-content-inner" id="shell-content-inner">
          <div class="status-panel" id="status-panel">
            <div class="status-cards status-cards-global">
              <div class="status-card status-card-seed">
                <div class="status-card-label">Current SEED</div>
                <div class="status-card-value-row">
                  <div class="status-card-seed-row">
                    <div class="status-card-value" id="dom-seed">0</div>
                    <span class="status-card-seed-delta" id="farming-accrual-hint" aria-live="polite"></span>
                  </div>
                  <button type="button" class="status-claim-btn" id="status-claim-btn">Claim</button>
                </div>
              </div>
              <div class="status-card">
                <div class="status-card-label">SEED/day</div>
                <div class="status-card-value" id="dom-seed-per-day">0</div>
              </div>
              <div class="status-card">
                <div class="status-card-label">Network Share</div>
                <div class="status-card-value" id="dom-network-share">—%</div>
              </div>
              <div class="status-card status-card-loft">
                <div class="status-card-label">Loft Lv</div>
                <div class="status-card-value-row">
                  <div class="status-card-value" id="dom-loft-level">1</div>
                  <button type="button" class="status-loft-upgrade-btn" id="status-loft-upgrade-btn">Upgrade</button>
                </div>
              </div>
            </div>
            <p class="network-state-error" id="network-state-error" aria-live="polite" style="display: none;"></p>
          </div>
          <div id="pane-farming" class="tab-pane active">
            <div class="farming-pane-body">
              <div class="loft-section">
                <div class="loft-grid" id="loft-grid" role="grid" aria-label="Loft slots" tabindex="-1">
                  <!-- 4x2 cells filled by JS -->
                </div>
              </div>
            </div>
          </div>
          <div id="pane-adopt" class="tab-pane">
            <div class="adopt-pane-body">
              <p class="adopt-tagline">Find your next companion.</p>
              <div class="adopt-balance">
                Balance: <span id="adopt-balance-value">0</span> $SEED
              </div>
              <p class="adopt-description">10 $SEED per adoption. Place birds on your Loft to earn SEED.</p>
              <div class="adopt-cta-card" id="adopt-cta-card">
                <h3 class="adopt-cta-title">Adoption</h3>
                <div class="gacha-cta-wrap">
                  <div class="gacha-cta-badge-row" id="gacha-cta-badge-row">
                    <span class="adopt-free-badge" id="adopt-free-badge">First free</span>
                  </div>
                  <div class="gacha-cta">
                    <div class="gacha-option">
                      <button type="button" class="shell-gacha-spin-btn" id="shell-gacha-1">Adopt 1x</button>
                      <div class="gacha-cost" id="gacha-cost-1"></div>
                    </div>
                    <div class="gacha-option">
                      <button type="button" class="shell-gacha-spin-btn" id="shell-gacha-10">Adopt 10x</button>
                      <div class="gacha-cost" id="gacha-cost-10"></div>
                    </div>
                  </div>
                </div>
                <p id="gacha-insufficient-message" class="gacha-insufficient-message" aria-live="polite"></p>
              </div>
              <div class="gacha-results-section gacha-results-section--hidden" id="gacha-results-section">
                <div id="gacha-confetti-wrap" class="gacha-confetti-wrap" aria-hidden="true"></div>
                <div id="adopt-feedback" class="adopt-feedback" aria-live="polite"></div>
                <h3 class="adopt-cta-title gacha-results-title">Adopted birds</h3>
                <div class="gacha-results-area" id="gacha-results-area">
                  <p class="gacha-results-empty" id="gacha-results-empty">No birds adopted yet. Your first adoption is free!</p>
                </div>
              </div>
              <div class="adopt-rarity-card" id="adopt-rarity-card" aria-label="Possible rarities">
                <h3 class="adopt-cta-title">Possible rarities</h3>
                <div class="adopt-rarity-preview-list" id="adopt-rarity-preview-list"></div>
              </div>
              <div class="adopt-stats">
                Total adopted: <span id="adopt-total-count">0</span>
              </div>
            </div>
          </div>
          <div id="pane-deck" class="tab-pane">
            <div class="deck-pane-body" id="deck-pane-body">
              <p class="deck-empty-hint" id="deck-empty-hint">Adopt a bird first in the Adopt tab.</p>
              <div class="deck-content-with-birds deck-content-with-birds--hidden" id="deck-content-with-birds">
                <div class="deck-onboarding-cta" id="deck-onboarding-cta" style="display: none;">
                  <p class="deck-onboarding-cta-text">Bird placed! Go to Farming to start earning SEED.</p>
                  <button type="button" class="shell-gacha-spin-btn" id="deck-onboarding-goto-farming">Go to Farming</button>
                </div>
                <section class="deck-section" id="deck-section-loft" aria-label="Loft">
                  <h3 class="deck-section-title">Loft <span id="deck-slots-caption" class="deck-slots-caption" aria-hidden="true"></span></h3>
                  <div class="deck-grid" id="deck-grid" role="group" aria-label="Loft slots">
                    <!-- 8 slots filled by JS -->
                  </div>
                  <div class="loft-save-wrap" id="loft-save-wrap" style="display: none;">
                    <span class="loft-save-power-hint" id="loft-save-power-hint" aria-live="polite"></span>
                    <button type="button" class="loft-save-btn" id="status-save-deck-btn">Save</button>
                  </div>
                </section>
                <section class="inventory-section" id="inventory-section" aria-label="Inventory">
                  <h3 class="inventory-section-title">Inventory</h3>
                  <div class="inventory-grid" id="inventory-grid" role="group" aria-label="Inventory birds">
                    <!-- cells filled by JS -->
                  </div>
                </section>
              </div>
            </div>
          </div>
          <div id="pane-network" class="tab-pane">
            <div class="network-pane-body">
              <p class="network-intro">See how the flock is growing across the network.</p>
              <section class="network-section" aria-label="Nests by level">
                <h3 class="network-section-title">Nests by level</h3>
                <div class="network-stat-list" id="network-level-list">
                  <!-- filled by JS -->
                </div>
              </section>
              <section class="network-section" aria-label="Birds by rarity">
                <h3 class="network-section-title">Birds by rarity</h3>
                <div class="network-stat-list" id="network-dist-list">
                  <!-- filled by JS -->
                </div>
                <div class="network-total">Total companions adopted: <strong id="network-total-birds">—</strong></div>
              </section>
              <p class="network-demo-note" id="network-demo-note">Demo data. Live stats when connected to network.</p>
            </div>
          </div>
          <div id="pane-debug" class="tab-pane">
            <div class="debug-pane-body">
              <div class="debug-section">
                <div class="debug-row">
                  <span class="debug-label">SEED</span>
                  <span class="debug-value" id="dom-debug-seed">0</span>
                  <button type="button" class="debug-set-btn" id="dom-debug-seed-set">Set</button>
                </div>
                <div class="debug-row">
                  <span class="debug-label">$SEED</span>
                  <span class="debug-value" id="dom-debug-bird">0</span>
                  <button type="button" class="debug-set-btn" id="dom-debug-bird-set">Set</button>
                </div>
                <div class="debug-row">
                  <span class="debug-label">Loft Level</span>
                  <span class="debug-value" id="dom-debug-loft">1</span>
                  <div class="debug-loft-btns">
                    <button type="button" class="debug-loft-btn" data-level="1">1</button>
                    <button type="button" class="debug-loft-btn" data-level="2">2</button>
                    <button type="button" class="debug-loft-btn" data-level="3">3</button>
                    <button type="button" class="debug-loft-btn" data-level="4">4</button>
                    <button type="button" class="debug-loft-btn" data-level="5">5</button>
                    <button type="button" class="debug-loft-btn" data-level="6">6</button>
                  </div>
                </div>
                <div class="debug-row">
                  <span class="debug-label">Local deck power</span>
                  <span class="debug-value" id="dom-debug-local-power">0</span>
                </div>
              </div>
              <div class="debug-section" id="dom-debug-network-section">
                <h4 class="debug-subtitle">Network State 切り分け</h4>
                <p class="debug-note" id="dom-debug-network-note">「オンチェーンを再取得」でコントラクトから直接取得した値と、直近の書き込み結果を比較できます。オンチェーン取得値が0 → サーバに届いていない。取得値に数値があるのにUIが0 → クライアント参照の問題。</p>
                <div class="debug-row">
                  <button type="button" class="debug-set-btn" id="dom-debug-fetch-onchain">オンチェーンを再取得</button>
                </div>
                <div class="debug-row">
                  <span class="debug-label">オンチェーン取得値（サーバ側）</span>
                </div>
                <div class="debug-row">
                  <span class="debug-label">Level 1–6</span>
                  <span class="debug-value" id="dom-debug-onchain-levels">—</span>
                </div>
                <div class="debug-row">
                  <span class="debug-label">Rarity [C,U,R,E,L]</span>
                  <span class="debug-value" id="dom-debug-onchain-rarity">—</span>
                </div>
                <div class="debug-row">
                  <span class="debug-label">My power</span>
                  <span class="debug-value" id="dom-debug-onchain-power">—</span>
                </div>
                <div class="debug-row">
                  <span class="debug-label">My share (bps)</span>
                  <span class="debug-value" id="dom-debug-onchain-share">—</span>
                </div>
                <div class="debug-row">
                  <span class="debug-label">取得エラー</span>
                  <span class="debug-value" id="dom-debug-onchain-error">—</span>
                </div>
                <div class="debug-row">
                  <span class="debug-label">直近の書き込み</span>
                </div>
                <div class="debug-row">
                  <span class="debug-label">addRarityCounts（ガチャ後）</span>
                  <span class="debug-value" id="dom-debug-last-addrarity">—</span>
                </div>
                <div class="debug-row">
                  <span class="debug-label">updatePower（Save後）</span>
                  <span class="debug-value" id="dom-debug-last-updatepower">—</span>
                </div>
              </div>
              <div class="debug-section debug-section-reset">
                <button type="button" class="debug-reset-btn" id="dom-debug-reset-disconnect">Reset &amp; Disconnect</button>
              </div>
            </div>
          </div>
          <div class="canvas-card" id="shell-canvas-card">
            <div id="app"></div>
          </div>

        </div>
      </main>
    </div>

    <!-- オンボーディング（チュートリアル）も body 直下: MetaMask 等で viewport 基準にし白抜きずれを防ぐ -->
    <div class="deck-onboarding-place-overlay" id="deck-onboarding-place-overlay" aria-hidden="true" aria-live="polite">
      <div class="deck-onboarding-place-overlay-dim-wrap">
        <div class="deck-onboarding-place-overlay-dim" id="deck-onboarding-place-overlay-dim" aria-hidden="true"></div>
      </div>
      <div class="deck-onboarding-place-message-wrap" id="deck-onboarding-place-message-wrap">
        <div class="deck-onboarding-place-message-inner">
          <p class="deck-onboarding-place-message">Tap the bird you want to place on the Loft.</p>
          <span class="deck-onboarding-place-pointer" aria-hidden="true">↓</span>
        </div>
      </div>
    </div>
    <div class="adopt-onboarding-overlay" id="adopt-onboarding-overlay" aria-hidden="true" aria-live="polite">
      <div class="adopt-onboarding-spotlight" id="adopt-onboarding-dim-spotlight" aria-hidden="true"></div>
      <div class="adopt-onboarding-message-wrap" id="adopt-onboarding-message-wrap">
        <div class="adopt-onboarding-message-inner">
          <p class="adopt-onboarding-message">Tap here to adopt<br class="adopt-onboarding-br-narrow"> your first bird.</p>
          <span class="adopt-onboarding-pointer" aria-hidden="true">↓</span>
        </div>
      </div>
    </div>

    <!-- 全モーダルを body 直下に配置: position:fixed が常に viewport 基準になり右端まで確実に暗転 -->
    <div class="gacha-modal-backdrop modal-viewport-cover" id="gacha-modal-backdrop" aria-hidden="true">
      <div class="gacha-modal" role="dialog" aria-labelledby="gacha-modal-title">
        <h2 class="gacha-modal-title" id="gacha-modal-title">Confirm Adoption</h2>
        <p class="gacha-modal-text" id="gacha-modal-text"></p>
        <div class="gacha-modal-actions">
          <button type="button" class="gacha-modal-cancel" id="gacha-modal-cancel">Cancel</button>
          <button type="button" class="gacha-modal-confirm" id="gacha-modal-confirm">Confirm</button>
        </div>
      </div>
    </div>
    <div class="gacha-result-modal-backdrop modal-viewport-cover" id="gacha-result-modal-backdrop" aria-hidden="true">
      <div class="gacha-result-modal" role="dialog" aria-labelledby="gacha-result-modal-title">
        <div class="gacha-result-modal-header">
          <h2 class="gacha-result-modal-title" id="gacha-result-modal-title">Adopted birds</h2>
          <button type="button" class="gacha-result-modal-close" id="gacha-result-modal-close" aria-label="Close">×</button>
        </div>
        <div class="gacha-result-modal-body">
          <div class="gacha-result-modal-feedback" id="gacha-result-modal-feedback"></div>
          <div id="gacha-result-modal-confetti-wrap" class="gacha-confetti-wrap" aria-hidden="true"></div>
          <div class="gacha-results-area" id="gacha-result-modal-area"></div>
        </div>
      </div>
    </div>
    <div class="place-success-modal-backdrop modal-viewport-cover" id="place-success-modal-backdrop" aria-hidden="true">
      <div class="place-success-modal" role="dialog" aria-labelledby="place-success-modal-title">
        <div id="place-success-modal-confetti-wrap" class="gacha-confetti-wrap gacha-confetti-wrap--legendary" aria-hidden="true"></div>
        <h2 class="place-success-modal-title" id="place-success-modal-title">Bird placed!</h2>
        <p class="place-success-modal-message">Go to Farming to start earning SEED.</p>
        <button type="button" class="place-success-modal-btn" id="place-success-modal-goto-farming">Go to Farming</button>
      </div>
    </div>
    <div class="loft-modal-backdrop modal-viewport-cover" id="loft-modal-backdrop" aria-hidden="true">
      <div class="loft-modal" id="loft-modal" role="dialog" aria-labelledby="loft-modal-title">
        <h2 class="loft-modal-title" id="loft-modal-title">Confirm Upgrade</h2>
        <p class="loft-modal-cost" id="loft-modal-cost"></p>
        <p class="loft-modal-error" id="loft-modal-error" aria-live="polite"></p>
        <div class="loft-modal-actions">
          <button type="button" class="loft-modal-cancel" id="loft-modal-cancel">Cancel</button>
          <button type="button" class="loft-modal-confirm" id="loft-modal-confirm">Confirm</button>
        </div>
      </div>
    </div>
    <div class="gacha-modal-backdrop modal-viewport-cover" id="message-modal-backdrop" aria-hidden="true">
      <div class="gacha-modal" role="dialog" aria-labelledby="message-modal-title">
        <h2 class="gacha-modal-title" id="message-modal-title"></h2>
        <p class="gacha-modal-text" id="message-modal-text"></p>
        <div class="gacha-modal-actions">
          <button type="button" class="gacha-modal-confirm" id="message-modal-ok">OK</button>
        </div>
      </div>
    </div>
    <div class="processing-modal-backdrop modal-viewport-cover" id="processing-modal-backdrop" aria-hidden="true">
      <div class="processing-modal" role="alertdialog" aria-live="polite">
        <p class="processing-modal-title">Processing…</p>
        <p class="processing-modal-text" id="processing-modal-text">Waiting for confirmation on the network.</p>
        <div class="processing-modal-spinner" aria-hidden="true">
          <span class="processing-modal-dot"></span>
          <span class="processing-modal-dot"></span>
          <span class="processing-modal-dot"></span>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
