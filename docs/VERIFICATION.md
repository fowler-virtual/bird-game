# 修正後の全体検証チェックリスト

修正・リファクタ時に、世界的なエンジニア／デザイナー視点で**必ず**実施する検証手順。

## 1. リネーム・シグネチャ変更時

- [ ] **旧名の残存**: 旧メソッド名・変数名・定数名で `grep` し、参照が 0 件であることを確認
- [ ] **呼び出し元**: 新名で検索し、想定する全ファイルで import / 呼び出しが更新されていることを確認
- [ ] **コメント・文字列**: コメント内やログ文字列に旧名が残っていないか確認

**例**: `isMobile` → `isNarrowViewport` の場合は  
`grep -r "isMobile" src` が 0 件、`grep -r "isNarrowViewport" src` で全使用箇所がヒットすること

## 2. 定数・テーマの追加・変更時

- [ ] **定義**: `theme.ts`（または該当モジュール）に定義があるか
- [ ] **使用箇所**: 使用する全シーン・コンポーネントで import されているか
- [ ] **未使用の旧定数**: 置き換え元の定数（例: `MUTED_COLOR` → `TEXT_MUTED`）が他に残っていないか

## 3. マルチファイル修正時

- [ ] **影響範囲**: 変更した API を参照する全ファイルを列挙し、そのすべてで修正済みか確認
- [ ] **型・インターフェース**: 型定義の変更に合わせて実装側の型・引数が揃っているか
- [ ] **エクスポート/インポート**: 追加・削除した export に対し、import が過不足なく更新されているか

## 4. ビルド・Lint

- [ ] **TypeScript**: `npm run build`（または `tsc --noEmit`）が成功するか
- [ ] **Lint**: 変更したファイルおよび影響し得るファイルで `ReadLints` を実行し、0 エラーであること
- [ ] **実行時**: 該当画面・操作を 1 回は手順として確認（可能なら起動・クリック・遷移まで）

## 5. 今回のコードベースで特に確認するパターン

| 変更種別       | 検索キーワード例                    | 確認内容                         |
|----------------|-------------------------------------|----------------------------------|
| レイアウト判定 | `isMobile`, `isNarrowViewport`      | 判定ロジックが 1 箇所に統一されているか |
| テーマ色       | `TEXT_PRIMARY`, `TEXT_MUTED`, `ACCENT` | 旧ローカル定数が残っていないか   |
| テキスト解像度 | `TEXT_RESOLUTION`                   | 全シーンで import し使用しているか   |
| タイトル UI    | `showTitleUI`, `hideTitleUI`        | 表示/非表示の切り替えが一貫しているか |
| ドロワー       | `setDrawerOpen`, `drawerBackdrop`   | 表示時のみ setInteractive など入力が正しいか |

---

**運用**: 上記を「修正完了前の必須ステップ」として扱い、リネーム・定数変更・マルチファイル修正のたびに実行する。
